<!--
  SIGNAL 9: THE DEAD AIR ARCHIVE

  This is the entry point for the SIGNAL 9 WebXR experience.  The page
  includes A‑Frame and the supporting interaction libraries via CDN to
  minimise setup.  All game logic lives in the accompanying JavaScript
  files located in the js/ folder.  Textures are served from the
  assets/ folder.

  Running locally: you must serve this directory over HTTP (e.g.
  `python -m http.server` from the project root) because WebXR
  and localStorage security restrictions prohibit running from
  `file://` URLs.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGNAL 9: The Dead Air Archive</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Core A‑Frame library.  Version 1.6.0 is stable and works with
         the super‑hands and aframe‑extras modules.  If you upgrade
         A‑Frame, verify compatibility in js/game.js. -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <!-- Delete the built‑in grabbable component to avoid a conflict
         between A‑Frame ≥1.5 and the super‑hands library. -->
    <script>
      if (AFRAME && AFRAME.components && AFRAME.components.grabbable) {
        delete AFRAME.components.grabbable;
      }
    </script>
    <!-- aframe‑extras provides miscellaneous helpers including
         sphere‑collider which is used by super‑hands. -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.0/dist/aframe-extras.min.js"></script>
    <!-- super‑hands adds high‑level grab, hover and drag events. -->
    <script src="https://unpkg.com/super-hands@3.0.6/dist/super-hands.min.js"></script>
    <!-- Custom game code (loaded after A‑Frame and its plugins) -->
    <script defer src="js/game.js"></script>
    <script defer src="js/scenes.js"></script>
  </head>
  <body>
    <a-scene id="scene" background="color: #0a0a0d" renderer="antialias: true" xr-mode-ui="enabled: true" fog="color: #050509; density: 0.015" stats>
      <!-- Asset management system.  Images are preloaded here so that A‑Frame
           can assign textures synchronously.  Additional procedural textures
           are created at run time in the game code. -->
      <a-assets>
        <img id="tex-static" src="assets/textures/static.png" crossorigin="anonymous">
        <img id="tex-metal" src="assets/textures/metal.png" crossorigin="anonymous">
        <!-- Additional textures (paper, warnings, scanlines) are generated on
             the fly with canvas in game.js. -->
      </a-assets>

      <!-- Player rig.  The rig wraps the camera and controllers so we can
           translate and rotate the player as a single unit.  The rig is
           positioned at (0,1.6,0) to approximate a standing height. -->
      <a-entity id="playerRig" position="0 1.6 0" thumbstick-controls>
        <!-- The head/camera.  look-controls allows the user to look
             around. -->
        <a-entity id="camera" camera look-controls></a-entity>
        <!-- Left hand.  sphere-collider detects proximity to interactable
             objects.  super‑hands interprets button presses and produces
             high‑level events (grab-start, drop, etc.). -->
        <a-entity id="leftHand"
                  hand-controls="hand: left; color: #f2dec9"
                  sphere-collider="objects: .interactable"
                  super-hands>
        </a-entity>
        <!-- Right hand.  Same configuration as the left. -->
        <a-entity id="rightHand"
                  hand-controls="hand: right; color: #f2dec9"
                  sphere-collider="objects: .interactable"
                  super-hands>
        </a-entity>
        <!-- Ghost hands used to create the delayed shadow effect on the rooftop.
             They are hidden by default and controlled by game.js. -->
        <a-entity id="leftGhost"
                  hand-controls="hand: left; color: #555555"
                  visible="false">
        </a-entity>
        <a-entity id="rightGhost"
                  hand-controls="hand: right; color: #555555"
                  visible="false">
        </a-entity>
      </a-entity>

      <!-- Placeholder for dynamic UI and mission entities.  game.js will
           populate this container with mission‑specific environments and
           interface panels. -->
      <a-entity id="gameRoot"></a-entity>

      <!-- Vignette overlay.  A black ring that fades the player’s
           peripheral vision to provide comfort during movement.  The
           visibility of this overlay is toggled via the Y button. -->
      <a-ring id="vignette"
              material="color: black; shader: flat; opacity: 0.5"
              radius-inner="0.2"
              radius-outer="1.2"
              position="0 0 -0.5"
              rotation="-90 0 0"
              visible="false"
              ></a-ring>

      <!-- Heads‑up UI elements will be inserted dynamically (wrist menu,
           compliance checklist, signal meter). -->

    </a-scene>
  </body>
</html>