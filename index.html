<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SIGNAL 9: THE DEAD AIR ARCHIVE</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.1.0/dist/aframe-extras.min.js"></script>
</head>
<body>
    <div id="ui">
        <h1>SIGNAL 9: DEAD AIR ARCHIVE</h1>
        <button id="enter-vr-btn" onclick="document.querySelector('a-scene').enterVR()">Enter Archive (VR)</button>
        <p id="debug-text">System Initializing...</p>
    </div>

    <a-scene background="color: #020202" renderer="antialias: false; colorManagement: true;" webxr="referenceSpaceType: local-floor">
        
        <a-assets>
            <mixin id="crt-shell" geometry="primitive: box; width: 0.6; height: 0.5; depth: 0.7" material="color: #2a2a2a"></mixin>
            <mixin id="crt-screen" geometry="primitive: plane; width: 0.5; height: 0.4" material="color: #111; shader: flat"></mixin>
            <mixin id="vhs-tape" geometry="primitive: box; width: 0.2; height: 0.05; depth: 0.12" material="color: #111"></mixin>
        </a-assets>

        <a-entity id="rig" movement-controls="speed: 0.08; fly: false" position="0 0 0">
            <a-entity id="camera" camera position="0 1.6 0" look-controls="pointerLockEnabled: false">
                <a-entity id="clipboard" visible="false" position="-0.3 -0.2 -0.4" rotation="-15 15 0" 
                          geometry="primitive: plane; width: 0.3; height: 0.4" material="color: #e3e3e3">
                    <a-text value="COMPLIANCE CHECKLIST\n\n1. Acknowledge 1000Hz only.\n2. Ignore your name.\n3. Blue light: Look down." 
                            color="#000" scale="0.12 0.12 0.12" position="-0.13 0.15 0.01"></a-text>
                </a-entity>
                <a-entity id="vignette" geometry="primitive: plane; width: 2; height: 2" material="color: black; transparent: true; opacity: 0" position="0 0 -0.5"></a-entity>
            </a-entity>

            <a-entity id="left-hand" hand-controls="hand: left; handModelStyle: lowPoly; color: #f2dec9" class="interactable"></a-entity>
            <a-entity id="right-hand" hand-controls="hand: right; handModelStyle: lowPoly; color: #f2dec9" 
                      laser-controls="hand: right" raycaster="objects: .clickable; far: 3" class="interactable"></a-entity>
        </a-entity>

        <a-entity id="ambient-light" light="type: ambient; color: #222; intensity: 0.8"></a-entity>
        <a-entity id="emergency-light" light="type: point; color: #ff0000; intensity: 0.4; distance: 8" position="0 2.8 -2"></a-entity>

        <a-box id="floor" position="0 -0.05 0" width="10" height="0.1" depth="10" material="color: #0a0a0a"></a-box>
        <a-box id="ceiling" position="0 3.5 0" width="10" height="0.1" depth="10" material="color: #050505"></a-box>
        <a-box id="wall-front" position="0 1.75 -5" width="10" height="3.5" depth="0.1" material="color: #151515"></a-box>
        
        <a-box position="1.5 1 -4.5" width="0.8" height="2" depth="0.8" material="color: #333"></a-box>
        <a-box position="-1 0.7 -4" width="2" height="0.05" depth="1" material="color: #443322"></a-box>
        <a-entity position="-1 1.0 -4.2">
            <a-entity mixin="crt-shell"></a-entity>
            <a-entity mixin="crt-screen" position="0 0 0.36" id="main-crt-screen"></a-entity>
        </a-entity>
        <a-entity mixin="vhs-tape" position="-0.5 0.75 -3.8" rotation="0 15 0" class="clickable" id="mission-tape"></a-entity>

        <a-entity id="tone-knob" class="clickable" geometry="primitive: cylinder; radius: 0.08; height: 0.05" 
                  material="color: #888" position="1.5 1.5 -4.05" rotation="90 0 0">
            <a-text id="tone-readout" value="000 Hz" position="0 0.1 0" scale="0.2 0.2 0.2" color="#0f0" align="center"></a-text>
        </a-entity>

        <a-entity id="audio-anchor-ear" position="0 1.6 0"></a-entity>
        <a-entity id="audio-anchor-ceiling" position="0 3.4 0"></a-entity>

    </a-scene>
    <script src="game.js"></script>
</body>
</html>
